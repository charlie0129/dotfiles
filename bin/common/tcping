#!/bin/bash

# Must have two arguments
if [[ $# -ne 2 ]]; then
    echo "Ping a tcp port repeatedly."
    echo "Usage: $0 <host> <port>"
    exit 1
fi

cnt=0
while true; do
    ret="$(nc -z -v "$1" "$2" 2>&1)"
    cnt=$((cnt+1))
    echo "[$cnt, $(date +'%H:%M:%S')] $ret"
    sleep 1
done
